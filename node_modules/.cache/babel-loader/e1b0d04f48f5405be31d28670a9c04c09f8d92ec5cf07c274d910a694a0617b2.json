{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar react_1 = __importDefault(require(\"react\"));\nvar type_check_utility_1 = require(\"type-check-utility\");\nvar utility_1 = __importDefault(require(\"../../shared/utility\"));\nvar customInput_1 = __importDefault(require(\"./customInput\"));\nvar formPropsIns_1 = require(\"../formPropsIns\");\nvar formVali_1 = __importDefault(require(\"../validation/formVali\"));\nvar appSettings_1 = __importDefault(require(\"../../shared/appSettings\"));\nvar numberMaskUtility_1 = __importDefault(require(\"../../shared/numberMaskUtility\"));\nvar formUtility_1 = __importDefault(require(\"../formUtility\"));\nvar constants_1 = __importDefault(require(\"../../shared/constants\"));\nvar NumberMask = function (_a) {\n  var _b = _a.mask,\n    mask = _b === void 0 ? {} : _b,\n    extractValueToSet = _a.extractValueToSet,\n    props = __rest(_a, [\"mask\", \"extractValueToSet\"]);\n  mask = __assign(__assign({}, appSettings_1.default.defaultNumberMask()), mask);\n  function changeEvent(e) {\n    var toMaskResult = numberMaskUtility_1.default.toNumberMaskWithCursor(e, mask);\n    numberMaskUtility_1.default.updateEventArgs(e, toMaskResult);\n    numberMaskUtility_1.default.updateDetail(e, mask);\n    props.onChange && props.onChange(e);\n  }\n  function onBlur(e) {\n    var pureValue = numberMaskUtility_1.default.extractPureValue(e.target.value, mask);\n    if (!type_check_utility_1.isDefined(pureValue)) pureValue = '';\n    if ([constants_1.default.keyboard.hyphen, mask.decimalSymbol].includes(pureValue)) {\n      numberMaskUtility_1.default.updateEventArgs(e, {\n        value: '',\n        cursorStart: 0,\n        cursorEnd: 0\n      });\n    }\n    numberMaskUtility_1.default.updateDetail(e, mask);\n    props.onBlur && props.onBlur(e);\n  }\n  function keyPressEvent(e) {\n    if (!numberMaskUtility_1.default.isValidChar(e, mask)) {\n      e.preventDefault();\n    }\n    props.onKeyPress && props.onKeyPress(e);\n  }\n  function extractValueToSetLocal(e, value) {\n    var valueWithCursor = numberMaskUtility_1.default.toNumberMaskWithCursor(e || {\n      target: {\n        value: value\n      }\n    }, mask);\n    return valueWithCursor;\n  }\n  function keyDownEvent(e) {\n    if (type_check_utility_1.isNotDefinedOrEmpty(mask.thousandsSeparatorSymbol) || type_check_utility_1.isNotDefinedOrEmpty(e.target.value)) {\n      return;\n    }\n    var conditionToOnlyMoveBack = function (index) {\n      var arr = utility_1.default.strings2FlatArray([mask.thousandsSeparatorSymbol, mask.suffix]);\n      return arr.includes(e.target.value[index]);\n    };\n    formUtility_1.default.backspaceDoNotDelete(e, conditionToOnlyMoveBack);\n    props.onKeyDown && props.onKeyDown(e);\n  }\n  var params = {\n    validation: new formPropsIns_1.ValidationIns(formVali_1.default.alwaysValid),\n    onBlur: onBlur,\n    onChange: changeEvent,\n    extractValueToValidate: function (value) {\n      return numberMaskUtility_1.default.extractPureValue(value, mask);\n    },\n    onKeyPress: keyPressEvent,\n    onKeyDown: keyDownEvent\n  };\n  return react_1.default.createElement(customInput_1.default, __assign({\n    extractValueToSet: extractValueToSet || extractValueToSetLocal\n  }, props, params));\n};\nexports.default = NumberMask;","map":{"version":3,"names":["react_1","__importDefault","require","type_check_utility_1","utility_1","customInput_1","formPropsIns_1","formVali_1","appSettings_1","numberMaskUtility_1","formUtility_1","constants_1","NumberMask","_a","_b","mask","extractValueToSet","props","__rest","__assign","default","defaultNumberMask","changeEvent","e","toMaskResult","toNumberMaskWithCursor","updateEventArgs","updateDetail","onChange","onBlur","pureValue","extractPureValue","target","value","isDefined","keyboard","hyphen","decimalSymbol","includes","cursorStart","cursorEnd","keyPressEvent","isValidChar","preventDefault","onKeyPress","extractValueToSetLocal","valueWithCursor","keyDownEvent","isNotDefinedOrEmpty","thousandsSeparatorSymbol","conditionToOnlyMoveBack","index","arr","strings2FlatArray","suffix","backspaceDoNotDelete","onKeyDown","params","validation","ValidationIns","alwaysValid","extractValueToValidate","createElement","exports"],"sources":["../../../form/controls/numberMask.tsx"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAAA,OAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,IAAAC,oBAAA,GAAAD,OAAA;AACA,IAAAE,SAAA,GAAAH,eAAA,CAAAC,OAAA;AAEA,IAAAG,aAAA,GAAAJ,eAAA,CAAAC,OAAA;AACA,IAAAI,cAAA,GAAAJ,OAAA;AACA,IAAAK,UAAA,GAAAN,eAAA,CAAAC,OAAA;AAEA,IAAAM,aAAA,GAAAP,eAAA,CAAAC,OAAA;AACA,IAAAO,mBAAA,GAAAR,eAAA,CAAAC,OAAA;AACA,IAAAQ,aAAA,GAAAT,eAAA,CAAAC,OAAA;AACA,IAAAS,WAAA,GAAAV,eAAA,CAAAC,OAAA;AAEA,IAAMU,UAAU,GAAmD,SAAAA,CAACC,EAAyD;EAAvD,IAAAC,EAAA,GAAAD,EAAA,CAAAE,IAAwB;IAAxBA,IAAI,GAAAD,EAAA,cAAG,EAAiB,GAAAA,EAAA;IAAEE,iBAAiB,GAAAH,EAAA,CAAAG,iBAAA;IAAKC,KAAK,GAAAC,MAAA,CAAAL,EAAA,EAAvD,6BAAyD,CAAF;EAEvHE,IAAI,GAAAI,QAAA,CAAAA,QAAA,KAAQX,aAAA,CAAAY,OAAW,CAACC,iBAAiB,EAAE,GAAKN,IAAI,CAAE;EAEtD,SAASO,WAAWA,CAACC,CAAC;IAClB,IAAMC,YAAY,GAAGf,mBAAA,CAAAW,OAAiB,CAACK,sBAAsB,CAACF,CAAC,EAAER,IAAI,CAAC;IACtEN,mBAAA,CAAAW,OAAiB,CAACM,eAAe,CAACH,CAAC,EAAEC,YAAY,CAAC;IAClDf,mBAAA,CAAAW,OAAiB,CAACO,YAAY,CAACJ,CAAC,EAAER,IAAI,CAAC;IAEvCE,KAAK,CAACW,QAAQ,IAAIX,KAAK,CAACW,QAAQ,CAACL,CAAC,CAAC;EACvC;EAEA,SAASM,MAAMA,CAACN,CAAC;IAEb,IAAIO,SAAS,GAAGrB,mBAAA,CAAAW,OAAiB,CAACW,gBAAgB,CAACR,CAAC,CAACS,MAAM,CAACC,KAAK,EAAElB,IAAI,CAAC;IACxE,IAAI,CAACZ,oBAAA,CAAA+B,SAAS,CAACJ,SAAS,CAAC,EAAEA,SAAS,GAAG,EAAE;IAGzC,IAAI,CAACnB,WAAA,CAAAS,OAAS,CAACe,QAAQ,CAACC,MAAM,EAAErB,IAAI,CAACsB,aAAa,CAAC,CAACC,QAAQ,CAACR,SAAS,CAAC,EAAE;MACrErB,mBAAA,CAAAW,OAAiB,CAACM,eAAe,CAACH,CAAC,EAAE;QAAEU,KAAK,EAAE,EAAE;QAAEM,WAAW,EAAE,CAAC;QAAEC,SAAS,EAAE;MAAC,CAAE,CAAC;;IAGrF/B,mBAAA,CAAAW,OAAiB,CAACO,YAAY,CAACJ,CAAC,EAAER,IAAI,CAAC;IACvCE,KAAK,CAACY,MAAM,IAAIZ,KAAK,CAACY,MAAM,CAACN,CAAC,CAAC;EACnC;EAEA,SAASkB,aAAaA,CAAClB,CAAC;IAEpB,IAAI,CAACd,mBAAA,CAAAW,OAAiB,CAACsB,WAAW,CAACnB,CAAC,EAAER,IAAI,CAAC,EAAE;MACzCQ,CAAC,CAACoB,cAAc,EAAE;;IAGtB1B,KAAK,CAAC2B,UAAU,IAAI3B,KAAK,CAAC2B,UAAU,CAACrB,CAAC,CAAC;EAC3C;EAEA,SAASsB,sBAAsBA,CAACtB,CAAC,EAAEU,KAAK;IACpC,IAAMa,eAAe,GAAGrC,mBAAA,CAAAW,OAAiB,CAACK,sBAAsB,CAACF,CAAC,IAAI;MAAES,MAAM,EAAE;QAAEC,KAAK,EAAAA;MAAA;IAAE,CAAE,EAAElB,IAAI,CAAC;IAClG,OAAO+B,eAAe;EAC1B;EAEA,SAASC,YAAYA,CAACxB,CAAC;IAEnB,IAAIpB,oBAAA,CAAA6C,mBAAmB,CAACjC,IAAI,CAACkC,wBAAwB,CAAC,IAAI9C,oBAAA,CAAA6C,mBAAmB,CAACzB,CAAC,CAACS,MAAM,CAACC,KAAK,CAAC,EAAE;MAC3F;;IAGJ,IAAMiB,uBAAuB,GAAG,SAAAA,CAACC,KAAK;MAElC,IAAMC,GAAG,GAAGhD,SAAA,CAAAgB,OAAO,CAACiC,iBAAiB,CAAC,CAACtC,IAAI,CAACkC,wBAAwB,EAAElC,IAAI,CAACuC,MAAM,CAAC,CAAC;MACnF,OAAOF,GAAG,CAACd,QAAQ,CAACf,CAAC,CAACS,MAAM,CAACC,KAAK,CAACkB,KAAK,CAAC,CAAC;IAC9C,CAAC;IAGDzC,aAAA,CAAAU,OAAW,CAACmC,oBAAoB,CAAChC,CAAC,EAAE2B,uBAAuB,CAAC;IAE5DjC,KAAK,CAACuC,SAAS,IAAIvC,KAAK,CAACuC,SAAS,CAACjC,CAAC,CAAC;EACzC;EAEA,IAAMkC,MAAM,GAAG;IACXC,UAAU,EAAE,IAAIpD,cAAA,CAAAqD,aAAa,CAACpD,UAAA,CAAAa,OAAQ,CAACwC,WAAW,CAAC;IACnD/B,MAAM,EAAAA,MAAA;IACND,QAAQ,EAAEN,WAAW;IACrBuC,sBAAsB,EAAE,SAAAA,CAAC5B,KAAK;MAAK,OAAAxB,mBAAA,CAAAW,OAAiB,CAACW,gBAAgB,CAACE,KAAK,EAAElB,IAAI,CAAC;IAA/C,CAA+C;IAClF6B,UAAU,EAAEH,aAAa;IACzBe,SAAS,EAAET;GACd;EAED,OACI/C,OAAA,CAAAoB,OAAA,CAAA0C,aAAA,CAACzD,aAAA,CAAAe,OAAW,EAAAD,QAAA;IAACH,iBAAiB,EAAEA,iBAAiB,IAAI6B;EAAsB,GAAM5B,KAAK,EAAMwC,MAAM,EAAI;AAE9G,CAAC;AAEDM,OAAA,CAAA3C,OAAA,GAAeR,UAAU"},"metadata":{},"sourceType":"script","externalDependencies":[]}